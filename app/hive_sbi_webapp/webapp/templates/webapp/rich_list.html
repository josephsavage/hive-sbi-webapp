{% extends 'layout/base.html' %}

{% load static %}

{% block title %}Richlist{% endblock %}

{% block content %}
<div class="card">
  <div class="card-header">
    Richlist
  </div>
  <div class="card-body">
    <nav class="d-flex bd-highlight mb-3">
      <div class="p-2 bd-highlight">
        <button type="button" class="btn btn-outline-dark" data-bs-toggle="modal" data-bs-target="#orderingModal">Ordering filter</button>

        <div class="modal fade" id="orderingModal" tabindex="-1" aria-labelledby="orderingModalLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Ordering filter</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <ul class="list-group">
                  <li class="list-group-item {% if shares_ascending_active %}active{% endif %}">
                    <a href="?ordering=shares" class="{% if shares_ascending_active %}text-light{% endif %}">Shares - ascending</a>
                  </li>
                  <li class="list-group-item {% if shares_descending_active %}active{% endif %}">
                    <a href="?ordering=-shares" class="{% if shares_descending_active %}text-light{% endif %}">Shares - descending</a>
                  </li>
                  <li class="list-group-item {% if bonus_shares_ascending_active %}active{% endif %}">
                    <a href="?ordering=bonus_shares" class="{% if bonus_shares_ascending_active %}text-light{% endif %}">Bonus shares - ascending</a>
                  </li>
                  <li class="list-group-item {% if bonus_shares_descending_active %}active{% endif %}">
                    <a href="?ordering=-bonus_shares" class="{% if bonus_shares_descending_active %}text-light{% endif %}">Bonus shares - descending</a>
                  </li>
                  <li class="list-group-item {% if estimate_rewarded_ascending_active %}active{% endif %}">
                    <a href="?ordering=estimate_rewarded" class="{% if estimate_rewarded_ascending_active %}text-light{% endif %}">Estimate rewarded - ascending</a>
                  </li>
                  <li class="list-group-item {% if estimate_rewarded_descending_active %}active{% endif %}">
                    <a href="?ordering=-estimate_rewarded" class="{% if estimate_rewarded_descending_active %}text-light{% endif %}">Estimate rewarded - descending</a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>

      <ul class="pagination ms-auto p-2 bd-highlight">
        <li class="page-item {% if not richlist.previous %}disabled{% endif %}"><a class="page-link" href="?{{ richlist.previous }}">Previous</a></li>

        {% if richlist.prev_page_number %}
        <li class="page-item"><a class="page-link" href="?{{ richlist.previous }}">{{ richlist.prev_page_number }}</a></li>
        {% endif %}

        <li class="page-item active"><a class="page-link" href="#">{{ richlist.active_page_number }}</a></li>

        {% if richlist.next_page_number %}
        <li class="page-item"><a class="page-link" href="?{{ richlist.next }}">{{ richlist.next_page_number }}</a></li>
        {% endif %}

        <li class="page-item {% if not richlist.next %}disabled{% endif %}"><a class="page-link" href="?{{ richlist.next }}">Next</a></li>
      </ul>
    </nav>

    <div class="table-responsive">
      <table class="table align-middle">
        <thead>
          <tr>
            <th>Account</th>
            <th>Shares</th>
            <th>Bonus Shares</th>
            <th>estimateBalanceValue</th>
            <th>estimatedNextVote</th>
            <th>estimateRewarded</th>
          </tr>
        </thead>
        <tbody>
          {% for member in richlist.results %}
          <tr>
            <td><strong>{{ member.account }}</strong></td>
            <td>{{ member.shares }}</td>
            <td>{{ member.bonus_shares }}</td>
            <td>{{ member.pending_balance }}</td>
            <td>{{ member.next_upvote_estimate }}</td>
            <td>{{ member.estimate_rewarded }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}
